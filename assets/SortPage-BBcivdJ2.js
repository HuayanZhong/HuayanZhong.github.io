import{c as z,H as O,n as y,t as C,d as A,o as I,h as q,I as F,w as $,m as H,u as K,e as M,a as T,b as Y}from"./index-CoLxLmKc.js";import{G as J,a as Q}from"./index-Df9IHLj4.js";import{S as W}from"./index-BHzMD8vK.js";import{N as X}from"./index-DlkJL-FJ.js";import{i as Z}from"./request-2uo1PmCe.js";import{d as w,r as k,g as ee,a as te,i as ae,y as oe,j as ne,n as N,c as r,k as re,z as se,m as B,o as g,b as P,w as p,q as h,F as L,l as j,A as ie,x as D,t as le,_ as ce}from"./index-45IKlSZ7.js";import{r as de,u as ue}from"./use-route-BAnOwtTZ.js";import"./use-placeholder-Fv3Yvx8G.js";const[me,_]=z("image"),ve={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:y,height:y,radius:y,lazyLoad:Boolean,iconSize:y,showError:C,errorIcon:A("photo-fail"),iconPrefix:String,showLoading:C,loadingIcon:A("photo"),crossorigin:String,referrerpolicy:String};var fe=w({name:me,props:ve,emits:["load","error"],setup(e,{emit:l,slots:n}){const i=k(!1),a=k(!0),s=k(),{$Lazyload:o}=ee().proxy,b=te(()=>{const t={width:I(e.width),height:I(e.height)};return q(e.radius)&&(t.overflow="hidden",t.borderRadius=I(e.radius)),t});ae(()=>e.src,()=>{i.value=!1,a.value=!0});const m=t=>{a.value&&(a.value=!1,l("load",t))},v=()=>{const t=new Event("load");Object.defineProperty(t,"target",{value:s.value,enumerable:!0}),m(t)},d=t=>{i.value=!0,a.value=!1,l("error",t)},u=(t,S,V)=>V?V():r(F,{name:t,size:e.iconSize,class:S,classPrefix:e.iconPrefix},null),x=()=>{if(a.value&&e.showLoading)return r("div",{class:_("loading")},[u(e.loadingIcon,_("loading-icon"),n.loading)]);if(i.value&&e.showError)return r("div",{class:_("error")},[u(e.errorIcon,_("error-icon"),n.error)])},c=()=>{if(i.value||!e.src)return;const t={alt:e.alt,class:_("img"),style:{objectFit:e.fit,objectPosition:e.position},crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy};return e.lazyLoad?re(r("img",B({ref:s},t),null),[[se("lazy"),e.src]]):r("img",B({ref:s,src:e.src,onLoad:m,onError:d},t),null)},f=({el:t})=>{const S=()=>{t===s.value&&a.value&&v()};s.value?S():N(S)},E=({el:t})=>{t===s.value&&!i.value&&d()};return o&&O&&(o.$on("loaded",f),o.$on("error",E),oe(()=>{o.$off("loaded",f),o.$off("error",E)})),ne(()=>{N(()=>{var t;(t=s.value)!=null&&t.complete&&!e.lazyLoad&&v()})}),()=>{var t;return r("div",{class:_({round:e.round,block:e.block}),style:b.value},[c(),x(),(t=n.default)==null?void 0:t.call(n)])}}});const ge=$(fe),[G,_e]=z("sidebar"),U=Symbol(G),be={modelValue:H(0)};var he=w({name:G,props:be,emits:["change","update:modelValue"],setup(e,{emit:l,slots:n}){const{linkChildren:i}=K(U),a=()=>+e.modelValue;return i({getActive:a,setActive:o=>{o!==a()&&(l("update:modelValue",o),l("change",o))}}),()=>{var o;return r("div",{role:"tablist",class:_e()},[(o=n.default)==null?void 0:o.call(n)])}}});const ye=$(he),[ke,R]=z("sidebar-item"),Se=M({},de,{dot:Boolean,title:String,badge:y,disabled:Boolean,badgeProps:Object});var Pe=w({name:ke,props:Se,emits:["click"],setup(e,{emit:l,slots:n}){const i=ue(),{parent:a,index:s}=T(U);if(!a)return;const o=()=>{e.disabled||(l("click",s.value),a.setActive(s.value),i())};return()=>{const{dot:b,badge:m,title:v,disabled:d}=e,u=s.value===a.getActive();return r("div",{role:"tab",class:R({select:u,disabled:d}),tabindex:d?void 0:0,"aria-selected":u,onClick:o},[r(Y,B({dot:b,class:R("text"),content:m},e.badgeProps),{default:()=>[n.title?n.title():v]})])}}});const pe=$(Pe),we=()=>Z.get("/category/list"),xe={class:"search"},Ie={key:0,class:"box"},Le={class:"right"},Be=w({__name:"SortPage",setup(e){const l=k(0),n=k([]);return we().then(i=>{n.value=i.data.data.list}),(i,a)=>{const s=X,o=W,b=F,m=pe,v=ye,d=ge,u=Q,x=J;return g(),P(L,null,[r(o,null,{default:p(()=>[r(s,{title:"全部分类"})]),_:1}),h("div",xe,[h("span",null,[r(b,{name:"search"}),a[1]||(a[1]=h("p",null,"搜索商品",-1))])]),n.value.length>0?(g(),P("div",Ie,[r(v,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=c=>l.value=c)},{default:p(()=>[(g(!0),P(L,null,j(n.value,c=>(g(),D(m,{title:c.name,key:c.category_id},null,8,["title"]))),128))]),_:1},8,["modelValue"]),h("div",Le,[r(x,{border:!1,"column-num":3},{default:p(()=>{var c;return[(g(!0),P(L,null,j(((c=n.value[l.value])==null?void 0:c.children)||[],f=>(g(),D(u,{key:f.category_id},{default:p(()=>[r(d,{src:f.image.external_url},null,8,["src"]),h("p",null,le(f.name),1)]),_:2},1024))),128))]}),_:1})])])):ie("",!0)],64)}}}),De=ce(Be,[["__scopeId","data-v-14feca0e"]]);export{De as default};
