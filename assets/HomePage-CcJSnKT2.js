import{c as G,d as $,n as W,t as se,f as ne,e as oe,h as V,I as N,w as Y,j as Ge,s as Ye,k as Je,l as Xe,i as Qe,m as ie,a as Ze,F as et,o as ve,C as tt,p as Ce,q as be,r as nt,v as at,x as ae,y as lt,z as ot,A as rt,D as _e,E as ye,G as ke}from"./index-CoLxLmKc.js";import{G as it,a as ct}from"./index-Df9IHLj4.js";import{u as ue,S as st,a as ut}from"./index-DfV5e9A2.js";import{N as dt}from"./index-DlkJL-FJ.js";import{i as ft}from"./request-2uo1PmCe.js";import{d as z,c as r,h as Se,r as w,a as O,p as gt,i as Le,n as Z,j as mt,m as Ve,e as Re,k as ht,v as vt,o as D,b as K,l as ce,F as le,u as bt,q as x,t as ee,s as _t,_ as Ee,w as te,x as Ie}from"./index-45IKlSZ7.js";import{r as yt,u as kt}from"./use-route-BAnOwtTZ.js";import{u as Pe}from"./use-id-CY40tJ8Q.js";import{o as It}from"./use-placeholder-Fv3Yvx8G.js";const[wt,F]=G("cell"),Be={tag:$("div"),icon:String,size:String,title:W,value:W,label:W,center:Boolean,isLink:Boolean,border:se,iconPrefix:String,valueClass:ne,labelClass:ne,titleClass:ne,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},xt=oe({},Be,yt);var Ct=z({name:wt,props:xt,setup(e,{slots:n}){const a=kt(),d=()=>{if(n.label||V(e.label))return r("div",{class:[F("label"),e.labelClass]},[n.label?n.label():e.label])},o=()=>{var l;if(n.title||V(e.title)){const _=(l=n.title)==null?void 0:l.call(n);return Array.isArray(_)&&_.length===0?void 0:r("div",{class:[F("title"),e.titleClass],style:e.titleStyle},[_||r("span",null,[e.title]),d()])}},u=()=>{const l=n.value||n.default;if(l||V(e.value))return r("div",{class:[F("value"),e.valueClass]},[l?l():r("span",null,[e.value])])},g=()=>{if(n.icon)return n.icon();if(e.icon)return r(N,{name:e.icon,class:F("left-icon"),classPrefix:e.iconPrefix},null)},m=()=>{if(n["right-icon"])return n["right-icon"]();if(e.isLink){const l=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return r(N,{name:l,class:F("right-icon")},null)}};return()=>{var l;const{tag:_,size:f,center:R,border:C,isLink:E,required:P}=e,y=(l=e.clickable)!=null?l:E,h={center:R,required:!!P,clickable:y,borderless:!C};return f&&(h[f]=!!f),r(_,{class:F(h),role:y?"button":void 0,tabindex:y?0:void 0,onClick:a},{default:()=>{var b;return[g(),o(),u(),m(),(b=n.extra)==null?void 0:b.call(n)]}})}}});const St=Y(Ct);function Te(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function Lt(e,n){if(Te(e)){if(n.required)return!1;if(n.validateEmpty===!1)return!0}return!(n.pattern&&!n.pattern.test(String(e)))}function Vt(e,n){return new Promise(a=>{const d=n.validator(e,n);if(Je(d)){d.then(a);return}a(d)})}function we(e,n){const{message:a}=n;return Xe(a)?a(e,n):a||""}function Rt({target:e}){e.composing=!0}function xe({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function Et(e,n){const a=Ge();e.style.height="auto";let d=e.scrollHeight;if(Qe(n)){const{maxHeight:o,minHeight:u}=n;o!==void 0&&(d=Math.min(d,o)),u!==void 0&&(d=Math.max(d,u))}d&&(e.style.height=`${d}px`,Ye(a))}function Pt(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function p(e){return[...e].length}function re(e,n){return[...e].slice(0,n).join("")}const[Bt,I]=G("field"),de={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:W,max:Number,min:Number,formatter:Function,clearIcon:$("clear"),modelValue:ie(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:$("focus"),formatTrigger:$("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},Tt=oe({},Be,de,{rows:W,type:$("text"),rules:Array,autosize:[Boolean,Object],labelWidth:W,labelClass:ne,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var pt=z({name:Bt,props:Tt,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:a}){const d=Pe(),o=Se({status:"unvalidated",focused:!1,validateMessage:""}),u=w(),g=w(),m=w(),{parent:l}=Ze(et),_=()=>{var t;return String((t=e.modelValue)!=null?t:"")},f=t=>{if(V(e[t]))return e[t];if(l&&V(l.props[t]))return l.props[t]},R=O(()=>{const t=f("readonly");if(e.clearable&&!t){const i=_()!=="",c=e.clearTrigger==="always"||e.clearTrigger==="focus"&&o.focused;return i&&c}return!1}),C=O(()=>m.value&&a.input?m.value():e.modelValue),E=O(()=>{var t;const i=f("required");return i==="auto"?(t=e.rules)==null?void 0:t.some(c=>c.required):i}),P=t=>t.reduce((i,c)=>i.then(()=>{if(o.status==="failed")return;let{value:v}=C;if(c.formatter&&(v=c.formatter(v,c)),!Lt(v,c)){o.status="failed",o.validateMessage=we(v,c);return}if(c.validator)return Te(v)&&c.validateEmpty===!1?void 0:Vt(v,c).then(k=>{k&&typeof k=="string"?(o.status="failed",o.validateMessage=k):k===!1&&(o.status="failed",o.validateMessage=we(v,c))})}),Promise.resolve()),y=()=>{o.status="unvalidated",o.validateMessage=""},h=()=>n("endValidate",{status:o.status,message:o.validateMessage}),b=(t=e.rules)=>new Promise(i=>{y(),t?(n("startValidate"),P(t).then(()=>{o.status==="failed"?(i({name:e.name,message:o.validateMessage}),h()):(o.status="passed",i(),h())})):i()}),S=t=>{if(l&&e.rules){const{validateTrigger:i}=l.props,c=be(i).includes(t),v=e.rules.filter(k=>k.trigger?be(k.trigger).includes(t):c);v.length&&b(v)}},j=t=>{var i;const{maxlength:c}=e;if(V(c)&&p(t)>+c){const v=_();if(v&&p(v)===+c)return v;const k=(i=u.value)==null?void 0:i.selectionEnd;if(o.focused&&k){const A=[...t],M=A.length-+c;return A.splice(k-M,M),A.join("")}return re(t,+c)}return t},B=(t,i="onChange")=>{var c,v;const k=t;t=j(t);const A=p(k)-p(t);if(e.type==="number"||e.type==="digit"){const L=e.type==="number";t=nt(t,L,L),i==="onBlur"&&t!==""&&(t=at(+t,(c=e.min)!=null?c:-1/0,(v=e.max)!=null?v:1/0).toString())}let M=0;if(e.formatter&&i===e.formatTrigger){const{formatter:L,maxlength:T}=e;if(t=L(t),V(T)&&p(t)>+T&&(t=re(t,+T)),u.value&&o.focused){const{selectionEnd:Q}=u.value,he=re(k,Q);M=p(L(he))-p(he)}}if(u.value&&u.value.value!==t)if(o.focused){let{selectionStart:L,selectionEnd:T}=u.value;if(u.value.value=t,V(L)&&V(T)){const Q=p(t);A?(L-=A,T-=A):M&&(L+=M,T+=M),u.value.setSelectionRange(Math.min(L,Q),Math.min(T,Q))}}else u.value.value=t;t!==e.modelValue&&n("update:modelValue",t)},s=t=>{t.target.composing||B(t.target.value)},q=()=>{var t;return(t=u.value)==null?void 0:t.blur()},J=()=>{var t;return(t=u.value)==null?void 0:t.focus()},X=()=>{const t=u.value;e.type==="textarea"&&e.autosize&&t&&Et(t,e.autosize)},pe=t=>{o.focused=!0,n("focus",t),Z(X),f("readonly")&&q()},$e=t=>{o.focused=!1,B(_(),"onBlur"),n("blur",t),!f("readonly")&&(S("onBlur"),Z(X),lt())},fe=t=>n("clickInput",t),Ae=t=>n("clickLeftIcon",t),Me=t=>n("clickRightIcon",t),De=t=>{ae(t),n("update:modelValue",""),n("clear",t)},ge=O(()=>{if(typeof e.error=="boolean")return e.error;if(l&&l.props.showError&&o.status==="failed")return!0}),Ne=O(()=>{const t=f("labelWidth"),i=f("labelAlign");if(t&&i!=="top")return{width:ve(t)}}),ze=t=>{t.keyCode===13&&(!(l&&l.props.submitOnEnter)&&e.type!=="textarea"&&ae(t),e.type==="search"&&q()),n("keypress",t)},me=()=>e.id||`${d}-input`,qe=()=>o.status,Oe=()=>{const t=I("control",[f("inputAlign"),{error:ge.value,custom:!!a.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(a.input)return r("div",{class:t,onClick:fe},[a.input()]);const i={id:me(),ref:u,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:f("disabled"),readonly:f("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${d}-label`:void 0,onBlur:$e,onFocus:pe,onInput:s,onClick:fe,onChange:xe,onKeypress:ze,onCompositionend:xe,onCompositionstart:Rt};return e.type==="textarea"?r("textarea",i,null):r("input",Ve(Pt(e.type),i),null)},Fe=()=>{const t=a["left-icon"];if(e.leftIcon||t)return r("div",{class:I("left-icon"),onClick:Ae},[t?t():r(N,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},We=()=>{const t=a["right-icon"];if(e.rightIcon||t)return r("div",{class:I("right-icon"),onClick:Me},[t?t():r(N,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},je=()=>{if(e.showWordLimit&&e.maxlength){const t=p(_());return r("div",{class:I("word-limit")},[r("span",{class:I("word-num")},[t]),Re("/"),e.maxlength])}},He=()=>{if(l&&l.props.showErrorMessage===!1)return;const t=e.errorMessage||o.validateMessage;if(t){const i=a["error-message"],c=f("errorMessageAlign");return r("div",{class:I("error-message",c)},[i?i({message:t}):t])}},Ue=()=>{const t=f("labelWidth"),i=f("labelAlign"),c=f("colon")?":":"";if(a.label)return[a.label(),c];if(e.label)return r("label",{id:`${d}-label`,for:a.input?void 0:me(),onClick:v=>{ae(v),J()},style:i==="top"&&t?{width:ve(t)}:void 0},[e.label+c])},Ke=()=>[r("div",{class:I("body")},[Oe(),R.value&&r(N,{ref:g,name:e.clearIcon,class:I("clear")},null),We(),a.button&&r("div",{class:I("button")},[a.button()])]),je(),He()];return ue({blur:q,focus:J,validate:b,formValue:C,resetValidation:y,getValidationStatus:qe}),gt(tt,{customValue:m,resetValidation:y,validateWithTrigger:S}),Le(()=>e.modelValue,()=>{B(_()),y(),S("onChange"),Z(X)}),mt(()=>{B(_(),e.formatTrigger),Z(X)}),Ce("touchstart",De,{target:O(()=>{var t;return(t=g.value)==null?void 0:t.$el})}),()=>{const t=f("disabled"),i=f("labelAlign"),c=Fe(),v=()=>{const k=Ue();return i==="top"?[c,k].filter(Boolean):k||[]};return r(St,{size:e.size,class:I({error:ge.value,disabled:t,[`label-${i}`]:i}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:Ne.value,valueClass:I("value"),titleClass:[I("label",[i,{required:E.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:c&&i!=="top"?()=>c:null,title:v,value:Ke,extra:a.extra})}}});const $t=Y(pt),[At,Mt]=G("divider"),Dt={dashed:Boolean,hairline:se,vertical:Boolean,contentPosition:$("center")};var Nt=z({name:At,props:Dt,setup(e,{slots:n}){return()=>{var a;return r("div",{role:"separator",class:Mt({dashed:e.dashed,hairline:e.hairline,vertical:e.vertical,[`content-${e.contentPosition}`]:!!n.default&&!e.vertical})},[!e.vertical&&((a=n.default)==null?void 0:a.call(n))])}}});const zt=Y(Nt),[qt,H]=G("notice-bar"),Ot={text:String,mode:String,color:String,delay:ie(1),speed:ie(60),leftIcon:String,wrapable:Boolean,background:String,scrollable:{type:Boolean,default:null}};var Ft=z({name:qt,props:Ot,emits:["close","replay"],setup(e,{emit:n,slots:a}){let d=0,o=0,u;const g=w(),m=w(),l=Se({show:!0,offset:0,duration:0}),_=()=>{if(a["left-icon"])return a["left-icon"]();if(e.leftIcon)return r(N,{class:H("left-icon"),name:e.leftIcon},null)},f=()=>{if(e.mode==="closeable")return"cross";if(e.mode==="link")return"arrow"},R=h=>{e.mode==="closeable"&&(l.show=!1,n("close",h))},C=()=>{if(a["right-icon"])return a["right-icon"]();const h=f();if(h)return r(N,{name:h,class:H("right-icon"),onClick:R},null)},E=()=>{l.offset=d,l.duration=0,rt(()=>{ye(()=>{l.offset=-o,l.duration=(o+d)/+e.speed,n("replay")})})},P=()=>{const h=e.scrollable===!1&&!e.wrapable,b={transform:l.offset?`translateX(${l.offset}px)`:"",transitionDuration:`${l.duration}s`};return r("div",{ref:g,role:"marquee",class:H("wrap")},[r("div",{ref:m,style:b,class:[H("content"),{"van-ellipsis":h}],onTransitionend:E},[a.default?a.default():e.text])])},y=()=>{const{delay:h,speed:b,scrollable:S}=e,j=V(h)?+h*1e3:0;d=0,o=0,l.offset=0,l.duration=0,clearTimeout(u),u=setTimeout(()=>{if(!g.value||!m.value||S===!1)return;const B=_e(g).width,s=_e(m).width;(S||s>B)&&ye(()=>{d=B,o=s,l.offset=-o,l.duration=o/+b})},j)};return It(y),ot(y),Ce("pageshow",y),ue({reset:y}),Le(()=>[e.text,e.scrollable],y),()=>{const{color:h,wrapable:b,background:S}=e;return ht(r("div",{role:"alert",class:H({wrapable:b}),style:{color:h,background:S}},[_(),P(),C()]),[[vt,l.show]])}}});const Wt=Y(Ft),[jt,U,Ht]=G("search"),Ut=oe({},de,{label:String,shape:$("square"),leftIcon:$("search"),clearable:se,actionText:String,background:String,showAction:Boolean});var Kt=z({name:jt,props:Ut,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:a,attrs:d}){const o=Pe(),u=w(),g=()=>{a.action||(n("update:modelValue",""),n("cancel"))},m=s=>{s.keyCode===13&&(ae(s),n("search",e.modelValue))},l=()=>e.id||`${o}-input`,_=()=>{if(a.label||e.label)return r("label",{class:U("label"),for:l()},[a.label?a.label():e.label])},f=()=>{if(e.showAction){const s=e.actionText||Ht("cancel");return r("div",{class:U("action"),role:"button",tabindex:0,onClick:g},[a.action?a.action():s])}},R=()=>{var s;return(s=u.value)==null?void 0:s.blur()},C=()=>{var s;return(s=u.value)==null?void 0:s.focus()},E=s=>n("blur",s),P=s=>n("focus",s),y=s=>n("clear",s),h=s=>n("clickInput",s),b=s=>n("clickLeftIcon",s),S=s=>n("clickRightIcon",s),j=Object.keys(de),B=()=>{const s=oe({},d,ke(e,j),{id:l()}),q=J=>n("update:modelValue",J);return r($t,Ve({ref:u,type:"search",class:U("field",{"with-message":s.errorMessage}),border:!1,onBlur:E,onFocus:P,onClear:y,onKeypress:m,onClickInput:h,onClickLeftIcon:b,onClickRightIcon:S,"onUpdate:modelValue":q},s),ke(a,["left-icon","right-icon"]))};return ue({focus:C,blur:R}),()=>{var s;return r("div",{class:U({"show-action":e.showAction}),style:{background:e.background}},[(s=a.left)==null?void 0:s.call(a),r("div",{class:U("content",e.shape)},[_(),B()]),f()])}}});const Gt=Y(Kt),Yt=()=>ft.get("/page/detail",{headers:{platform:"H5"}}),Jt=["onClick"],Xt=["src"],Qt={class:"info"},Zt=z({__name:"productPage",props:{productList:{type:Array,default:()=>[]}},setup(e){const n=e,a=bt(),d=o=>{a.push(`/prodetail/${n.productList[o].goods_id}`)};return(o,u)=>(D(!0),K(le,null,ce(n.productList,(g,m)=>(D(),K("div",{onClick:l=>d(m),class:"box",key:g.goods_id},[x("img",{src:g.goods_image,alt:""},null,8,Xt),x("div",Qt,[x("span",null,ee(g.goods_name),1),x("span",null," 已售"+ee(g.goods_sales)+"件 ",1),x("span",null,[x("span",null," ￥"+ee(g.goods_price_min),1),x("span",{class:_t({hidden:g.line_price_max==="0.00"})},[x("del",null,"￥"+ee(g.line_price_max),1)],2)])])],8,Jt))),128))}}),en=Ee(Zt,[["__scopeId","data-v-9a3fd733"]]),tn=["src"],nn=["src"],an={class:"box"},ln=z({__name:"HomePage",setup(e){const n=w(""),a=w([]),d=w(""),o=w([]),u=w(""),g=w([]);return Yt().then(m=>{n.value=m.data.data.pageData.items[0].params.placeholder,a.value=m.data.data.pageData.items[1].data,d.value=m.data.data.pageData.items[2].params.text,o.value=m.data.data.pageData.items[3].data,u.value=m.data.data.pageData.items[4].data[0].imgUrl,g.value=m.data.data.pageData.items[6].data}),(m,l)=>{const _=dt,f=Gt,R=ut,C=st,E=Wt,P=ct,y=it,h=zt;return D(),K(le,null,[r(_,{title:"智慧商城"}),r(f,{placeholder:n.value,background:"#f1f1f2"},null,8,["placeholder"]),r(C,{class:"my-swipe",autoplay:1e3,"indicator-color":"white","lazy-render":""},{default:te(()=>[(D(!0),K(le,null,ce(a.value,b=>(D(),Ie(R,{key:b.imgName},{default:te(()=>[x("img",{src:b.imgUrl,alt:""},null,8,tn)]),_:2},1024))),128))]),_:1}),r(E,{scrollable:"","left-icon":"volume-o",text:d.value},null,8,["text"]),r(y,{"column-num":5},{default:te(()=>[(D(!0),K(le,null,ce(o.value,b=>(D(),Ie(P,{key:b.imgName,icon:b.imgUrl,text:b.text},null,8,["icon","text"]))),128))]),_:1}),x("img",{src:u.value,alt:""},null,8,nn),r(h,{style:{color:"#000",borderColor:"#000",padding:"0 16px"}},{default:te(()=>l[0]||(l[0]=[Re(" 猜你喜欢 ")])),_:1}),x("div",an,[r(en,{productList:g.value},null,8,["productList"])])],64)}}}),hn=Ee(ln,[["__scopeId","data-v-3d9057b9"]]);export{hn as default};
