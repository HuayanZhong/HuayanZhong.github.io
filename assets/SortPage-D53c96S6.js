import{c as z,N as O,a as y,t as C,s as N,C as I,x as K,I as F,w as $,u as M,m as T,e as Y,b as q,d as H}from"./index-D5IVMRjW.js";import{G as J,a as Q}from"./index-EaPSiNOB.js";import{S as W}from"./index-OOE-zaCZ.js";import{N as X}from"./index-C3MT3zNx.js";import{i as Z}from"./request-CYPSLcde.js";import{d as x,r as S,g as ee,a as te,i as ae,n as oe,j as re,p as A,c as n,s as ne,A as se,m as B,b as P,w as p,u as h,B as ie,F as L,o as g,t as j,z as D,x as le,_ as ce}from"./index-CoNTkAIC.js";import{r as de,u as ue}from"./use-route-DTI4ojFM.js";import"./use-placeholder-CGb2ZCAm.js";const[me,_]=z("image"),ve={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:y,height:y,radius:y,lazyLoad:Boolean,iconSize:y,showError:C,errorIcon:N("photo-fail"),iconPrefix:String,showLoading:C,loadingIcon:N("photo"),crossorigin:String,referrerpolicy:String};var fe=x({name:me,props:ve,emits:["load","error"],setup(e,{emit:l,slots:r}){const i=S(!1),a=S(!0),s=S(),{$Lazyload:o}=ee().proxy,b=te(()=>{const t={width:I(e.width),height:I(e.height)};return K(e.radius)&&(t.overflow="hidden",t.borderRadius=I(e.radius)),t});ae(()=>e.src,()=>{i.value=!1,a.value=!0});const m=t=>{a.value&&(a.value=!1,l("load",t))},v=()=>{const t=new Event("load");Object.defineProperty(t,"target",{value:s.value,enumerable:!0}),m(t)},d=t=>{i.value=!0,a.value=!1,l("error",t)},u=(t,k,V)=>V?V():n(F,{name:t,size:e.iconSize,class:k,classPrefix:e.iconPrefix},null),w=()=>{if(a.value&&e.showLoading)return n("div",{class:_("loading")},[u(e.loadingIcon,_("loading-icon"),r.loading)]);if(i.value&&e.showError)return n("div",{class:_("error")},[u(e.errorIcon,_("error-icon"),r.error)])},c=()=>{if(i.value||!e.src)return;const t={alt:e.alt,class:_("img"),style:{objectFit:e.fit,objectPosition:e.position},crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy};return e.lazyLoad?ne(n("img",B({ref:s},t),null),[[se("lazy"),e.src]]):n("img",B({ref:s,src:e.src,onLoad:m,onError:d},t),null)},f=({el:t})=>{const k=()=>{t===s.value&&a.value&&v()};s.value?k():A(k)},E=({el:t})=>{t===s.value&&!i.value&&d()};return o&&O&&(o.$on("loaded",f),o.$on("error",E),oe(()=>{o.$off("loaded",f),o.$off("error",E)})),re(()=>{A(()=>{var t;(t=s.value)!=null&&t.complete&&!e.lazyLoad&&v()})}),()=>{var t;return n("div",{class:_({round:e.round,block:e.block}),style:b.value},[c(),w(),(t=r.default)==null?void 0:t.call(r)])}}});const ge=$(fe),[G,_e]=z("sidebar"),U=Symbol(G),be={modelValue:T(0)};var he=x({name:G,props:be,emits:["change","update:modelValue"],setup(e,{emit:l,slots:r}){const{linkChildren:i}=M(U),a=()=>+e.modelValue;return i({getActive:a,setActive:o=>{o!==a()&&(l("update:modelValue",o),l("change",o))}}),()=>{var o;return n("div",{role:"tablist",class:_e()},[(o=r.default)==null?void 0:o.call(r)])}}});const ye=$(he),[Se,R]=z("sidebar-item"),ke=Y({},de,{dot:Boolean,title:String,badge:y,disabled:Boolean,badgeProps:Object});var Pe=x({name:Se,props:ke,emits:["click"],setup(e,{emit:l,slots:r}){const i=ue(),{parent:a,index:s}=q(U);if(!a)return;const o=()=>{e.disabled||(l("click",s.value),a.setActive(s.value),i())};return()=>{const{dot:b,badge:m,title:v,disabled:d}=e,u=s.value===a.getActive();return n("div",{role:"tab",class:R({select:u,disabled:d}),tabindex:d?void 0:0,"aria-selected":u,onClick:o},[n(H,B({dot:b,class:R("text"),content:m},e.badgeProps),{default:()=>[r.title?r.title():v]})])}}});const pe=$(Pe),xe=()=>Z.get("/category/list"),we={class:"search"},Ie={key:0,class:"box"},Le={class:"right"},Be=x({__name:"SortPage",setup(e){const l=S(0),r=S([]);return xe().then(i=>{r.value=i.data.data.list}),(i,a)=>{const s=X,o=W,b=F,m=pe,v=ye,d=ge,u=Q,w=J;return g(),P(L,null,[n(o,null,{default:p(()=>[n(s,{title:"全部分类"})]),_:1}),h("div",we,[h("span",null,[n(b,{name:"search"}),a[1]||(a[1]=h("p",null,"搜索商品",-1))])]),r.value.length>0?(g(),P("div",Ie,[n(v,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=c=>l.value=c)},{default:p(()=>[(g(!0),P(L,null,j(r.value,c=>(g(),D(m,{title:c.name,key:c.category_id},null,8,["title"]))),128))]),_:1},8,["modelValue"]),h("div",Le,[n(w,{border:!1,"column-num":3},{default:p(()=>{var c;return[(g(!0),P(L,null,j(((c=r.value[l.value])==null?void 0:c.children)||[],f=>(g(),D(u,{key:f.category_id},{default:p(()=>[n(d,{src:f.image.external_url},null,8,["src"]),h("p",null,le(f.name),1)]),_:2},1024))),128))]}),_:1})])])):ie("",!0)],64)}}}),De=ce(Be,[["__scopeId","data-v-14feca0e"]]);export{De as default};
